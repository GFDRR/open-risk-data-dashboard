<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="minimal-ui, width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
    <meta content="Open Data for Resilience Index " name="description" />
    <meta content="" name="author" />

    <base href="{{$locationProvider.$get}}" />

    <title>Open Data for Resilience Index - Countries page</title>

    <!-- jQuery library -->
    <script src="bower_components/jquery/dist/jquery.min.js"></script>

    <!-- Angular components -->
    <script src="bower_components/angular/angular.min.js"></script>

    <!-- Chart libraries-->
    <script src="bower_components/chart.js/dist/Chart.min.js"></script>
    <script src="bower_components/angular-chart.js/dist/angular-chart.min.js"></script>

    <link href="js/vendor/ng-table/ng-table.min.css" rel="stylesheet">
    <script src="js/vendor/ng-table/ng-table.min.js"></script>

    <!-- bootstrap Framework -->
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- font awesome-->
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link href="bower_components/animate.css/animate.min.css" rel="stylesheet">

    <!-- RODI APP -->
    <script src="bower_components/angular-cookies/angular-cookies.min.js"></script>
    <script src="js/angular/app.js"></script>
    <script src="js/angular/service.js" type="text/javascript"></script>
    <script src="js/angular/controller.js" type="text/javascript"></script>
    <script src="js/angular/controller_mainmenu.js" type="text/javascript"></script>
    <script src="js/angular/directive.js" type="text/javascript"></script>
    <!-- RODI APP -->

    <!--ADOBE typekit-->
    <!--<script src="https://use.typekit.net/yxp8fxq.js"></script>-->
    <!--<script>try{Typekit.load({ async: true });}catch(e){}</script>-->

    <!-- RODI css -->
    <link href="css/rodi_css.css" rel="stylesheet">
    <link href="css/style_map.css" rel="stylesheet">

    <!-- Guida: https://medium.com/@tweededbadger/tutorial-dynamic-data-driven-svg-map-with-angularjs-b112fdec421d -->
    <!--<script src="js/change_svg.js"></script>-->
</head>
<body ng-app="RodiApp" ng-controller="RodiCtrl">

<div class="container-fluid">


    <!-- Section HEADER - INIZIO -->
    <section id="rodi_header">

        <div class="row  ">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                    <a ng-if="bHome" href="" ng-click="changeview('index.html', '0')" data-toggle="tooltip" title="Home"><img src="img/template/rodi_logo_new.png" alt="Open Data for Resilience Initiative" class="img-responsive pull-left" /></a>
                </div>
                <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">

                    <mainmenu ></mainmenu>
                    <button type="button" class="navbar-toggle navbar-toggle-left-black " data-toggle="collapse" data-target="#menu-hazard" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar icon-bar-white"></span>
                        <span class="icon-bar icon-bar-white"></span>
                        <span class="icon-bar icon-bar-white"></span>
                    </button>
                    <button type="button" class="navbar-toggle navbar-toggle-right-black " data-toggle="collapse" data-target="#menu-website" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar icon-bar-white"></span>
                        <span class="icon-bar icon-bar-white"></span>
                        <span class="icon-bar icon-bar-white"></span>
                    </button>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">
                <br />
                <h2 class="page_title_small">Countries</h2>
            </div>
        </div>

        <div class="row" id="top-menu">
            <br />
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <!--<hazardmenu></hazardmenu>-->
                <div class="collapse navbar-collapse" id="menu-hazard">
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <ul class="nav navbar-nav text-center">
                                <li  ng-repeat="appli in applicability" >
                                    <a href="" ng-click="setUnSetFilter(appli.title)" ng-class="filterApplicabilityClass(appli.title)">
                                        <i class="{{appli.icon}} fa-2x"></i>
                                        <span>{{appli.title}}</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>
    <!-- Section HEADER - FINE -->

    <!-- Section MAP - INIZIO -->
    <section id="main-map" style="padding-top:1em;">


        <!--<div class="head_sep white horiz"></div>-->
        <!-- TAB NAVIGATION -->
        <div class="row" style="">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">

                <ul class="nav nav-tabs" role="tablist">
                    <li class="active"><a href="#tab1" role="tab" data-toggle="tab">View Table</a></li>
                    <li><a href="#tab2" role="tab" data-toggle="tab">View Map</a></li>
                    <!--<li><a href="#tab3" role="tab" data-toggle="tab"></a></li>-->
                </ul>
                <!-- TAB CONTENT -->
                <div class="tab-content">
                    <div class="active tab-pane fade in" id="tab1">
                        <!--<browsedata></browsedata>-->
                        <!--<div class="jumbotron">-->
                            <!-- Country Matrix -->
                            <!--<div class="container">-->
                                <div class="row">

                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                        <br />
                                        <!-- row: country | column data type | click details dataset -->
                                        <table class="table table-condensed table-striped table-responsive data hidden-xs">
                                            <thead>
                                                <tr>
                                                    <th class="row_icon text-center">
                                                        <h4>#</h4>
                                                    </th>
                                                    <th class="row_icon country" >
                                                        <h4>COUNTRY</h4>
                                                    </th> <!-- cella vuota -->
                                                    <th class="row_icon">
                                                        <h4>SCORE</h4>
                                                    </th> <!-- cella vuota -->
                                                    <th class="row_icon flat" ng-repeat="hc in HazardCategory" style="text-align: center;">
                                                        <h4>{{hc.category.name}}</h4>
                                                    </th>
                                                </tr>
                                            </thead>


                                            <tbody>

                                            <tr ng-repeat="country in arrListCountry">
                                                <td class="minimal">{{$index + 1}}.</td>
                                                <td class="country truncate" >
                                                    <strong>
                                                        <a href="" ng-click="changepage('dataset_list.html?idcountry=' + country.iso2 + '&idcategory=0')">{{country.name}}</a>
                                                    </strong>
                                                </td>

                                                <td class="">
                                                    <strong>
                                                        <small><span >{{country.score}} %</span>&nbsp;&nbsp;&nbsp;&nbsp;</small>
                                                    </strong>
                                                    <progress value="{{country.score}}" max="100"></progress>
                                                </td>
                                                <td class="text-center" style="" ng-repeat="(key, value) in country.data">
                                                    <!-- click verso dataset list with filters country & category -->
                                                    <a href="" ng-if="value.value !== '-1.0'" ng-click="changepage('dataset_list.html?idcountry=' + country.iso2 + '&idcategory=' + (value.id - 1))" alt="Profile: {{country.name}}">
                                                        <div class="matrix_cell" style="{{colorCell(value.value)}}">
                                                            <span ng-show="(value.value*1) >= 0">{{value.value}}</span>
                                                            <span ng-show="(value.value*1) < 0"></span>
                                                        </div>
                                                    </a>

                                                    <!-- click verso contribute page -->
                                                    <a href="" ng-if="value.value == '-1.0'" ng-click="changepage('contribute.html')" alt="Profile: {{country.name}}"><div class="matrix_cell" style="{{colorCell(value.value)}}"></div></a>
                                                </td>
                                            </tr>

                                            </tbody>

                                        </table>

                                        <table class="table table-condensed table-striped table-responsive data visible-xs">
                                            <thead>
                                            <tr>
                                                <th class="row_icon " >
                                                    <h4>#</h4>
                                                </th>
                                                <th class="row_icon" >
                                                    <h4>COUNTRY</h4>
                                                </th> <!-- cella vuota -->
                                                <th class="row_icon">
                                                    <h4>SCORE</h4>
                                                </th> <!-- cella vuota -->
                                            </tr>
                                            </thead>


                                            <tbody>
                                                <!--<tr><td colspan="7"></td></tr>-->
                                                <!--<tr ng-repeat="(key, row) in aCountryList">-->
                                                <tr ng-repeat="country in arrListCountry">
                                                    <td>{{$index + 1}}.</td>
                                                    <td style="">
                                                        <strong>
                                                            <a href="" ng-click="changepage('dataset_list.html?idcountry=' + country.iso2 + '&idcategory=0')">{{country.name}}</a>
                                                        </strong>
                                                    </td>

                                                    <td class="">
                                                        <strong>
                                                            <small>
                                                                <span style="">{{country.score}} %</span>
                                                            </small>
                                                        </strong>
                                                        <progress value="{{country.score}}" max="100"></progress>
                                                    </td>
                                                </tr>

                                            </tbody>

                                        </table>

                                    </div>
                                </div>
                            <!--</div>-->
                        <!--</div>-->

                    </div>
                    <div class="tab-pane fade in" id="tab2">

                        <div class="position_map_legend">
                            <div class="legend_gradient"></div>
                            <div class="pull-right legend_gradient_txt"><span>0%</span></div>
                            <div class="pull-left legend_gradient_txt"><span>100%</span></div>
                        </div>

                        <div class="row">
                            <div class="map_place">
                                <div svg-map></div>

                                <!--<div class="popup_country_data {{popupClass}}" ng-style="{'top':objRodiVariable.popupY, 'left': objRodiVariable.popupX}" ng-if="objRodiVariable.bPopupCountry">-->
                                <div class="popup_country_data {{popupClass}}" ng-if="objRodiVariable.bPopupCountry">
                                    <strong>Country code:</strong> {{objRodiVariable.countryID}}<br />
                                    <strong>Country description:</strong> {{objRodiVariable.countryDesc}}<br />
                                    <strong>Country score: {{objRodiVariable.valueData}} %</strong>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <!--</div>-->
            </div>
        </div>

    </section>
    <!-- Section MAP - FINE -->


</div>

<!-- Section FOOTER - INIZIO -->
<rodifooter></rodifooter>
<!-- Section FOOTER - FINE -->




<!--start modal intro-->
<!-- Button trigger modal -->
<!--<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">-->
<!--Launch demo modal-->
<!--</button>-->


<!-- Include all compiled plugins (below), or include individual files as needed -->

<script>
    $('.expand').on('click',function(e){
        e.preventDefault();
        $(this).toggleClass('active');
    });
</script>
<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!--wow for animate.css-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/wow/0.1.12/wow.min.js"></script>

<script>
    $('#myModal').modal('show')
</script>


<script>
    $(function() {
        $('progress').each(function() {
            var max = $(this).val();
            $(this).val(0).animate({ value: max }, { duration: 2000, easing: 'easeOutCirc' });
        });
    });
</script>


</body>
</html>